# Markdown图书站点使用说明

## 📚 项目简介

Markdown图书站点是一个基于Django开发的文档管理系统，支持Markdown格式的图书和文章管理。系统提供了完整的图书创建、编辑、发布功能，以及强大的搜索和权限管理能力。

### 主要特性

- ✅ **Markdown编辑器**：支持完整的Markdown语法，包括代码高亮、表格、流程图等
- ✅ **图书管理**：创建、编辑、删除图书，支持封面图片上传
- ✅ **文章管理**：为图书添加章节文章，支持富文本编辑
- ✅ **智能搜索**：支持关键词搜索和高级搜索（用户:书名格式）
- ✅ **权限管理**：基于用户组的权限控制系统
- ✅ **审计日志**：记录所有重要操作，便于追踪和审计
- ✅ **响应式设计**：适配各种屏幕尺寸，提供良好的用户体验

---

## 🚀 快速开始

### 环境要求

- Python 3.8+
- Django 4.2+
- 数据库（默认使用SQLite）

### 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd Books
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **数据库迁移**
   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

4. **创建超级用户**
   ```bash
   python manage.py createsuperuser
   ```

5. **启动开发服务器**
   ```bash
   python manage.py runserver
   ```

6. **访问系统**
   打开浏览器访问：`http://127.0.0.1:8000/`

---

## 📖 功能使用指南

### 1. 图书管理

#### 创建图书

1. 访问管理页面：`/admins/`
2. 点击"添加图书"按钮
3. 填写图书信息：
   - **标题**：图书名称
   - **作者**：图书作者
   - **描述**：图书简介
   - **封面图片**：上传图书封面（可选）
   - **发布状态**：选择是否发布
4. 点击"保存"完成创建

#### 编辑图书

1. 在图书列表中找到要编辑的图书
2. 点击"编辑"按钮
3. 修改图书信息后保存

#### 删除图书

1. 在图书列表中找到要删除的图书
2. 点击"删除"按钮
3. 确认删除操作

**注意**：删除图书会同时删除其下的所有文章，此操作不可恢复。

#### 查看图书详情

1. 在首页或图书列表中点击图书标题
2. 查看图书的完整信息和文章列表
3. 点击文章标题查看文章内容

### 2. 文章管理

#### 创建文章

1. 进入图书详情页面
2. 点击"添加文章"按钮
3. 填写文章信息：
   - **标题**：文章标题
   - **内容**：使用Markdown编辑器编写内容
4. 点击"保存"完成创建

#### 编辑文章

1. 在图书详情页面的文章列表中找到要编辑的文章
2. 点击文章标题进入编辑页面
3. 修改内容后保存

#### 删除文章

1. 在管理页面的文章列表中找到要删除的文章
2. 点击"删除"按钮
3. 确认删除操作

### 3. 搜索功能

#### 基础搜索

在首页搜索框中输入关键词，系统会搜索：
- 图书标题
- 图书内容
- 用户名

#### 高级搜索

使用`用户:书名`格式进行精确搜索：
- 示例：`hank:Python` - 搜索用户hank创建的标题包含"Python"的图书

#### 搜索结果

- 搜索结果以卡片形式展示
- 显示图书封面、标题、作者和文章数量
- 支持分页浏览，可调整每页显示数量（5/10/15/30/50）

### 4. Markdown编辑器

系统支持完整的Markdown语法，包括：

#### 基础语法

```markdown
# 一级标题
## 二级标题
**粗体文本**
*斜体文本*
- 列表项1
- 列表项2
```

#### 代码块

```markdown
\`\`\`python
def hello():
    print("Hello, World!")
\`\`\`
```

#### 表格

```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据1 | 数据2 | 数据3 |
```

#### 流程图

系统支持Mermaid流程图：

```markdown
\`\`\`mermaid
graph TD
    A[开始] --> B[处理]
    B --> C[结束]
\`\`\`
```

---

## 👥 用户与权限管理

### 用户角色

系统支持三种用户角色：

1. **超级管理员**
   - 拥有所有权限
   - 可以创建、编辑、删除用户
   - 可以管理用户组
   - 可以访问审计日志

2. **管理员**
   - 可以管理图书和文章
   - 可以查看审计日志
   - 不能管理用户

3. **普通用户**
   - 可以创建和编辑自己的图书
   - 可以查看公开的图书和文章
   - 不能删除其他用户的内容

### 用户管理

#### 创建用户

1. 访问管理页面：`/admins/`
2. 切换到"用户"标签页
3. 点击"添加用户"按钮
4. 填写用户信息：
   - **用户名**：登录账号
   - **邮箱**：联系邮箱
   - **密码**：登录密码
   - **用户组**：分配用户角色
5. 点击"保存"完成创建

#### 编辑用户

1. 在用户列表中找到要编辑的用户
2. 点击"编辑"按钮
3. 修改用户信息或权限
4. 保存更改

#### 删除用户

1. 在用户列表中找到要删除的用户
2. 点击"删除"按钮
3. 确认删除操作

**注意**：删除用户会同时删除其创建的所有图书和文章。

### 权限组管理

系统预定义了以下权限组：

- **超级管理员组**：拥有所有权限
- **管理员组**：图书和文章管理权限
- **普通用户组**：基础内容创建权限

管理员可以创建自定义权限组并分配权限。

---

## 🔐 安全与审计

### 审计日志

系统自动记录以下操作：

- 用户创建、更新、删除
- 权限授予和撤销
- 图书和文章的修改和删除
- 系统初始化
- 管理页面访问

#### 查看审计日志

1. 访问管理页面：`/admins/`
2. 点击"审计日志"标签
3. 查看操作记录，包括：
   - 操作用户
   - 操作类型
   - 操作状态
   - 操作时间
   - IP地址
   - 详细信息

### 密码管理

#### 修改密码

1. 登录系统后，访问修改密码页面：`/accounts/change-password/`
2. 输入当前密码和新密码
3. 点击"修改密码"完成更改

---

## 🎨 界面说明

### 首页

- **搜索框**：快速搜索图书
- **图书卡片**：展示图书封面、标题、作者和文章数量
- **分页导航**：浏览更多图书

### 图书详情页

- **图书信息**：标题、作者、发布日期、简介
- **封面图片**：图书封面展示
- **文章列表**：左侧显示所有章节
- **文章内容**：右侧显示选中文章的完整内容
- **操作按钮**：返回列表、添加文章等

### 管理页面

- **标签页导航**：用户、组、图书、文章、日志
- **数据表格**：显示对应模块的数据列表
- **操作按钮**：添加、编辑、删除等操作
- **分页控制**：浏览大量数据

---

## 📝 常见问题

### Q1: 如何上传图书封面？

A: 在创建或编辑图书时，点击"封面图片"字段，选择本地图片文件上传。支持JPG、PNG等常见图片格式。

### Q2: Markdown编辑器支持哪些功能？

A: 支持标准Markdown语法，包括标题、列表、代码块、表格、链接、图片等。还支持代码高亮和Mermaid流程图。

### Q3: 如何批量删除文章？

A: 目前系统不支持批量删除，需要逐个删除文章。如需此功能，请联系管理员进行定制开发。

### Q4: 忘记密码怎么办？

A: 联系超级管理员重置密码，或使用数据库管理工具直接修改用户密码。

### Q5: 如何备份数据？

A: 使用Django的dumpdata命令导出数据：
```bash
python manage.py dumpdata > backup.json
```

恢复数据：
```bash
python manage.py loaddata backup.json
```

### Q6: 系统支持多语言吗？

A: 目前系统仅支持中文界面。如需多语言支持，需要进行国际化开发。

---

## 🛠️ 技术支持

### 联系方式



### 开发文档

详细的开发文档请参考：
- [Django官方文档](https://docs.djangoproject.com/)
- [Markdown语法指南](https://www.markdownguide.org/)
- [Mermaid流程图文档](https://mermaid-js.github.io/) 暂不支持

---

## 📄 许可证

本项目采用 [MIT License](LICENSE) 开源许可证。

---

## 🙏 致谢



---

**最后更新时间**：2026年1月
**版本号**：v1.0.0
